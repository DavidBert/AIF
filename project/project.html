<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Project presentation - AI Frameworks</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/docco.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../index.html">AI Frameworks</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../index.html" class="nav-link">Home</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Courses</a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Development tools for Data Scientist</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../developpement/git_intro.html" class="dropdown-item">Introduction to Git</a>
</li>
            
<li>
    <a href="../developpement/pytorch.html" class="dropdown-item">Introduction to Pytorch</a>
</li>
            
<li>
    <a href="../developpement/docker.html" class="dropdown-item">Introduction to Docker</a>
</li>
            
<li>
    <a href="../developpement/api.html" class="dropdown-item">Introduction to REST APIs</a>
</li>
            
<li>
    <a href="../developpement/mnist.html" class="dropdown-item">Practical session 1</a>
</li>
            
<li>
    <a href="../developpement/colorize.html" class="dropdown-item">Practical session 2</a>
</li>
            
<li>
    <a href="../developpement/quizz.html" class="dropdown-item">Quizz</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Recommender systems</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../rec_sys/rec_sys.html" class="dropdown-item">Course and practical session</a>
</li>
            
<li>
    <a href="../rec_sys/quizz.html" class="dropdown-item">Quizz</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Introduction to Reinforcement Learning</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../rl/rl.html" class="dropdown-item">Course and practical session</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Interpretability</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../xai/interpretability.html" class="dropdown-item">Course and practical session</a>
</li>
            
<li>
    <a href="../xai/quizz.html" class="dropdown-item">Quizz</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Introduction to Natural Language Processing (NLP)</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../nlp/nlp.html" class="dropdown-item">Course and practical session</a>
</li>
            
<li>
    <a href="../nlp/quizz.html" class="dropdown-item">Quizz</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Out-of-Distribution and Anomaly Detection</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../ood/ood.html" class="dropdown-item">Course and practical session</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Conformal Prediction</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../conformal/conformal.html" class="dropdown-item">Course and practical session</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Project</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="project.html" class="dropdown-item active" aria-current="page">Project presentation</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/DavidBert/AIF" class="nav-link">Github repository</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../conformal/conformal.html" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" class="nav-link disabled">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#project" class="nav-link">Project:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="project">Project:</h1>
<p>Welcome to the final project presentation page!<br />
In the following, you will find the instructions for the project that you will have to complete during the course.<br />
This project will be composed of 4 parts.<br />
I tried to build it in a way that would make you use all the tools and frameworks that we will see in class and that would let you start working each individual part once you have completed the corresponding practical session.  </p>
<p>We will build a web application that will help users to perform many operations about movies like:
- predicting the genre of a movie according to its plot or its poster
- recommending movies according to the posters or their plots
- detect wether an image is a poster of a movie</p>
<p>During the last hour of every second practical session, you are allowed to start working on the project.<br />
I really recommend you to do so, but I also encourage you to finish the corresponding practical session before starting the project.<br />
I will provide you with a solution for the practical session that you can use as a reference.</p>
<h3 id="part-1-development-tools-for-data-scientist">Part 1: Development tools for Data Scientist</h3>
<p>You should now have completed practical sessions associated to the project.
If not I would recommend to do them before continuing.</p>
<p>In the practical sessions, you should have learned how to use docker and how to create a rest API using flask.<br />
In parallel, you should have learned in HDDL how to use a pre-trained model and how to fine-tune it to perform a new task.  </p>
<p>For this first part of the project, I would like you to train a pretrained model to predict the genre of a movie according to its poster.<br />
Then you will have to create a rest API to predict the genre of a movie according to its poster. 
Then use gradio to create a web interface that calls this API and allows users to upload a movie poster and get the predicted genre.<br />
Once all this is done, you will have to create a docker file to package your API and web interface and push it to a github repository that you will have to share with me. <br />
Please do not store the models weights in your repository, but rather on a cloud like Google drive and make your docker file download them at runtime.
<img alt="" src="../img/project/Project1.png" /></p>
<h4 id="dataset">Dataset:</h4>
<p>I created a dataset of movie posters and their corresponding genres.<br />
Posters are stored in their corresponding genre folder in such a way that it is easy for you to load with the <code>torchvision.datasets.ImageFolder</code> class. 
You can download it <a href="https://drive.google.com/file/d/1-1OSGlN2EOqyZuehBgpgI8FNOtK-caYf/view?usp=sharing">here</a>.<br />
Do not store it in your Github repository!</p>
<h4 id="additional-help">Additional help:</h4>
<p>An easy way to run both the web app and the REST API in a single  container would consist to create a bash script that runs both the web app and the API service.<br />
This is not the best practice, but it might be easier for you to do so. Thus you can start with this solution and then try to run the web app and the annoy index in two different containers.</p>
<p>Here is an example of a bash script that runs both the web app and the rest API:  </p>
<pre><code class="language-bash">#!/bin/bash
python python api.py &amp;  gradio_app.py 
</code></pre>
<p>The <code>&amp;</code> operator is used to put jobs in the background.<br />
Here the API service is run in the background and the web app is run in the foreground.<br />
Call this script in your docker file to run the application.</p>
<p>The good practice consists in runnnig the web app in a docker container and the API in another container.<br />
To do so you can use docker-compose. 
Look at the <a href="https://docs.docker.com/compose/gettingstarted/">docker-compose documentation</a> to learn how to use it. </p>
<p>Here are the theroritical steps to follow to run the web app and the API in two different containers using docker-compose.<br />
First, you need to create Dockerfiles for both the Gradio web app and the API.<br />
Then create a docker-compose.yml file to define and run the multi-container Docker applications. For exemple something like:  </p>
<pre><code class="language-yaml">version: '3.8'
services:
  gradio-app:
    build:
      context: .
      dockerfile: Dockerfile-gradio
    ports:
      - &quot;7860:7860&quot;
    depends_on:
      - model_api

  model_api:
    build:
      context: .
      dockerfile: Dockerfile-api
    ports:
      - &quot;5000:5000&quot;
</code></pre>
<p>Make sure in your gradio app to call the API through the url <code>http://model_api:5000/</code> as the base URL for API requests.</p>
<p>To run the application, run the following command in the same directory as the docker-compose.yml file:</p>
<pre><code class="language-bash">docker-compose up
</code></pre>
<p>The Gradio web app should be accessible at http://localhost:7860.<br />
The REST API, if it has endpoints exposed, will be accessible at http://localhost:5000.</p>
<p>To stop and remove the containers, networks, and volumes created by docker-compose up, run:</p>
<pre><code class="language-bash">docker-compose down
</code></pre>
<h3 id="part-2-recommendation-systems-based-on-posters">Part 2: Recommendation systems based on posters</h3>
<p>During the practical session, you saw how to build a recommender system based on content using the movie posters.<br />
Use <code>Gradio</code> to build a web app that takes as input a movie poster and returns the images of the 5 most similar movies according to their poster.<br />
I would like you to mimic a real recommender system using a vector database.<br />
To do so I want the database to be requested by the web app through a REST API. 
The web app should be light and fast.<br />
Use a pre-trained network only to extract the vector representation of the input image and call through the REST API the annoy index you built during the practical session to find the 5 most similar movies.
<img alt="" src="../img/project/Project2.png" />    </p>
<p>For the sake of simplicity, I would recommend you to use the same network you used in the previous part and just adding a new route to the API to return the 5 most similar movies.  </p>
<h4 id="dataset_1">Dataset:</h4>
<p>Use the same dataset as in the practical session.  </p>
<h3 id="part-3-recommendation-systems-based-on-plots">Part 3: Recommendation systems based on plots</h3>
<p>During the practical session, you saw how to compute embeddings of documents using three techniques: Bag_of_words, Word2Vec and BERT.<br />
You will now build a recommender system based on content using the movie plots.<br />
To do so get the movies_metadata.csv file from <a href="https://www.kaggle.com/rounakbanik/the-movies-dataset">here</a> and compute the embeddings of each movie plot (the <em>overview</em> column) using at least a bag-of_word technique and a pre-trained model (Glove or DistillBert).
You sould create one new column for each embedding technique.  <br />
Once this is done, build an annoy index for each embedding.<br />
Similarly to the recommender system project, I want you to build a web app that takes a movie description as input and returns the 5 most similar movies according to their plot.
The web app should be light and fast and provide the possibility to choose the embedding technique to use.</p>
<h3 id="part-4-ood">Part 4 OOD:</h3>
<p>Modify the part 1 to whether the image uploaded by the user is a movie poster or not.<br />
If it is a movie poster, predict the genre of the movie.<br />
If it is not a movie poster, display a message to the user.</p>
<h3 id="what-you-are-going-to-submit">What you are going to submit:</h3>
<p>Make a <strong>private</strong> repository on github and share it with me.<br />
In this repository, you will have to store the following:
- The code for the 4 parts of the project
- The corresponding docker files and docker-compose file if any
- A readme file explaining how to run the project. I will make nothing more than running the commands written in the readme file.  I suggest you to try to run the entire project from a clean environment to make sure that it works.
- Do not store the models weights in your repository, but rather on a cloud like Google drive and make your docker file download them at runtime.
- Same for the dataset, not stored on a drive if it is not necessary but also downloaded at runtime.</p>
<h3 id="evaluation-criteria">Evaluation criteria:</h3>
<ul>
<li>The project is working and runs without errors</li>
<li>The readme file is well written and explains how to run the project</li>
<li>Clarity of the code</li>
<li>The project is well organized</li>
<li>No unecessary libraries are installed in each container</li>
</ul>
<h3 id="deadline">Deadline:</h3>
<p>The project is due on the 16th of February at 11:59 PM.<br />
Invite me to the repository.
Please send me an email to confirm that you have completed the project containing the name of all the members of the group and the link to the repository. </p>
<h3 id="additional-help_1">Additional help:</h3>
<p>You can find a small example of how to create and orchestrate both the API and the web interface using docker compose <a href="Docker_compose_annoy.html">here</a>.
Try to understand how it works and then modify it to fit the project.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../javascripts/mathjax.js"></script>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
